(this.webpackJsonpcliente=this.webpackJsonpcliente||[]).push([[0],{32:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(1),c=n.n(a),i=n(25),o=n.n(i),r=(n(32),n(14)),l=n(2),d=(n(33),n(13)),j=n.n(d),h=n(16),b=n(6),u=n(7),p=n(9),m=n(8);n(35).config();var O=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).getOperations=function(){fetch("http://localhost:8080/api/operations").then((function(e){return e.json()})).then((function(t){e.setState({datos:t}),e.contar(),e.ordenar()})).catch((function(e){return console.error(e)}))},e.state={datos:[],totalIngresos:[],totalEgresos:[],primeros:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOperations();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"contar",value:function(){var e=Object.values(this.state.datos).filter((function(e){return"Ingreso"===e.type})),t=Object.values(this.state.datos).filter((function(e){return"Egreso"===e.type})),n=0,s=0;e.forEach((function(e){n+=e.amount})),t.forEach((function(e){s+=e.amount})),this.setState({totalIngresos:n,totalEgresos:s})}},{key:"ordenar",value:function(){var e=this.state.datos,t=Object.values(e).sort((function(e,t){return e.date>t.date})),n=[],s=10;t.length<s&&(s=t.length);for(var a=0;a<s;a++){var c=t[a];n.push(c)}this.setState({primeros:n})}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h4",{children:"Balance actual"}),Object(s.jsxs)("table",{className:"responsive-table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Ingresos"}),Object(s.jsx)("th",{children:"Egresos"}),Object(s.jsx)("th",{children:"Total"})]})}),Object(s.jsx)("tbody",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:this.state.totalIngresos}),Object(s.jsx)("td",{children:this.state.totalEgresos}),Object(s.jsx)("td",{children:this.state.totalIngresos-this.state.totalEgresos})]})})]})]}),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h4",{children:"\xdaltimos 10 registrados"}),Object(s.jsxs)("table",{className:"responsive-table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Fecha"}),Object(s.jsx)("th",{children:"Tipo"}),Object(s.jsx)("th",{children:"Monto"}),Object(s.jsx)("th",{})]})}),Object(s.jsx)("tbody",{children:this.state.primeros.map((function(e,t){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.date}),Object(s.jsx)("td",{children:e.type}),Object(s.jsx)("td",{children:e.amount})]},t)}))})]})]})]})}}]),n}(c.a.Component),x=n(17),v=n(10),g=n.n(v),f=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).onChange=function(t){var n=e.state;n[t.target.name]=t.target.value,e.setState(n)},e.setOperation=function(){fetch("http://localhost:8080/api/operations/create",{method:"POST",body:JSON.stringify(e.state),headers:{"Content-Type":"application/json"}}).then((function(t){t.json(),e.props.clickHandler()})).catch((function(e){return console.error("Error:",e)}))},e.state={userName:sessionStorage.getItem("UserName")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({operation:this.props.operation}),null===sessionStorage.getItem("UserName")&&(alert("Esta cargando datos sin registrarse. \nAparecer\xe1 como no registrado"),this.setState({userName:"No registrado"}));g.a.Modal.init(this.Modal,{inDuration:250,outDuration:250,opacity:.5,dismissible:!1,startingTop:"4%",endingTop:"10%"}),g.a.Datepicker.init(this.datepicker),g.a.FormSelect.init(this.FormSelect),g.a.FormSelect.init(this.FormSelect2)}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"margin-top ",children:Object(s.jsxs)("button",{className:"waves-effect waves-light btn modal-trigger","data-target":"modal1",children:[Object(s.jsx)("i",{className:"material-icons left",children:"add"}),"Agregar nueva operaci\xf3n"]})}),Object(s.jsxs)("div",{ref:function(t){e.Modal=t},id:"modal1",className:"modal",children:[Object(s.jsx)("div",{className:"modal-content",children:Object(s.jsx)("div",{className:"margin-top",children:Object(s.jsx)("div",{className:"row container",children:Object(s.jsxs)("form",{className:"col s12",children:[Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"concept",type:"text",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"concept",children:"Concept"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"amount",type:"number",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"amount",children:"Amount"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsxs)("select",{ref:function(t){e.FormSelect=t},type:"type",name:"type",value:this.state.select,onChange:this.onChange.bind(this),children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Choose your option"}),Object(s.jsx)("option",{value:"Ingreso",children:"Ingreso"}),Object(s.jsx)("option",{value:"Egreso",children:"Egreso"})]}),Object(s.jsx)("label",{htmlFor:"type",children:"Tipo"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsxs)("select",{ref:function(t){e.FormSelect2=t},type:"category",name:"category",value:this.state.select,onChange:this.onChange.bind(this),defaultValue:"DEFAULT",children:[Object(s.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Choose your option"}),Object(s.jsx)("option",{value:"Comida",children:"Comida"}),Object(s.jsx)("option",{value:"Limpieza",children:"Limpieza"}),Object(s.jsx)("option",{value:"Servicios",children:"Servicios"}),Object(s.jsx)("option",{value:"Impuestos",children:"Impuestos"}),Object(s.jsx)("option",{value:"Personal",children:"Personal"}),Object(s.jsx)("option",{value:"Mercader\xeda",children:"Mercader\xeda"}),Object(s.jsx)("option",{value:"Reparaciones",children:"Reparaciones"}),Object(s.jsx)("option",{value:"Proveedores",children:"Proveedores"})]}),Object(s.jsx)("label",{htmlFor:"category",children:"Category"})]})})]})})})}),Object(s.jsxs)("div",{className:"modal-footer",children:[Object(s.jsx)("button",{className:"modal-close btn blue",onClick:this.setOperation.bind(this),children:"Agree"}),Object(s.jsx)("button",{className:"modal-close btn red margin-left",children:"Disagree"})]})]})]})}}]),n}(a.Component),N=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).onChange=function(t){var n=e.state;n[t.target.name]=t.target.value,e.setState(n)},e.update=function(){fetch("http://localhost:8080/api/operations/update/".concat(e.props.operation),{method:"PUT",body:JSON.stringify(e.state),headers:{"Content-Type":"application/json"}}).then((function(t){t.json(),e.props.clickHandler()})).catch((function(e){return console.error("Error:",e)}))},e.state={userName:sessionStorage.getItem("UserName")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){g.a.Modal.init(this.ModalUpdate,{inDuration:250,outDuration:250,opacity:.5,dismissible:!1,startingTop:"4%",endingTop:"10%"}),g.a.Datepicker.init(this.datepicker),g.a.FormSelect.init(this.FormSelect),g.a.FormSelect.init(this.FormSelect2)}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"margin-top ",children:Object(s.jsx)("button",{className:"btn btn-floating blue modal-trigger","data-target":"modalUpdate",children:Object(s.jsx)("i",{className:"material-icons",children:"edit"})})}),Object(s.jsxs)("div",{ref:function(t){e.ModalUpdate=t},id:"modalUpdate",className:"modal",children:[Object(s.jsx)("div",{className:"modal-content",children:Object(s.jsx)("div",{className:"margin-top",children:Object(s.jsx)("div",{className:"row container",children:Object(s.jsxs)("form",{className:"col s12",children:[Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"concept",type:"text",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"concept",children:"Concept"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"amount",type:"number",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"amount",children:"Amount"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsxs)("select",{ref:function(t){e.FormSelect=t},type:"type",name:"type",value:this.state.select,onChange:this.onChange.bind(this),children:[Object(s.jsx)("option",{value:"",disabled:!0,children:"Choose your option"}),Object(s.jsx)("option",{value:"Ingreso",children:"Ingreso"}),Object(s.jsx)("option",{value:"Egreso",children:"Egreso"})]}),Object(s.jsx)("label",{htmlFor:"type",children:"Tipo"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsxs)("select",{ref:function(t){e.FormSelect2=t},type:"category",name:"category",value:this.state.select,onChange:this.onChange.bind(this),defaultValue:"DEFAULT",children:[Object(s.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Choose your option"}),Object(s.jsx)("option",{value:"Comida",children:"Comida"}),Object(s.jsx)("option",{value:"Limpieza",children:"Limpieza"}),Object(s.jsx)("option",{value:"Servicios",children:"Servicios"}),Object(s.jsx)("option",{value:"Impuestos",children:"Impuestos"}),Object(s.jsx)("option",{value:"Personal",children:"Personal"}),Object(s.jsx)("option",{value:"Mercader\xeda",children:"Mercader\xeda"}),Object(s.jsx)("option",{value:"Reparaciones",children:"Reparaciones"}),Object(s.jsx)("option",{value:"Proveedores",children:"Proveedores"})]}),Object(s.jsx)("label",{htmlFor:"category",children:"Category"})]})})]})})})}),Object(s.jsxs)("div",{className:"modal-footer",children:[Object(s.jsx)("button",{className:"modal-close btn blue",onClick:this.update.bind(this),children:"Agree"}),Object(s.jsx)("button",{className:"modal-close btn red margin-left",children:"Disagree"})]})]})]})}}]),n}(a.Component),y=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).getOperations=function(){fetch("http://localhost:8080/api/operations").then((function(e){return e.json()})).then((function(t){return e.setState({datos:t,Datosfiltrados:t})})).catch((function(e){return console.error(e)}))},e.delete=function(t){var n={_id:t};fetch("http://localhost:8080/api/operations/delete",{method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(t){t.json(),e.getOperations()})).catch((function(e){return console.error("Error:",e)}))},e.state={datos:[],Datosfiltrados:[]},e.handleChange=e.handleChange.bind(Object(x.a)(e)),e}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target.value,n=this.state.datos;if("Todos"===t)this.setState({Datosfiltrados:this.state.datos});else{var s=n.filter((function(e){return e.category===t}));this.setState({Datosfiltrados:s})}}},{key:"componentDidMount",value:function(){var e=Object(h.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOperations();case 2:g.a.FormSelect.init(this.FormSelect3);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col m12",children:Object(s.jsx)("h4",{children:"Lista de operaciones registradas"})}),Object(s.jsxs)("div",{className:"input-field col s12 m12",children:[Object(s.jsxs)("select",{ref:function(t){e.FormSelect3=t},type:"category",name:"category",id:"category",value:this.state.select,onChange:this.handleChange,defaultValue:"DEFAULT",children:[Object(s.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Choose an option to sort table"}),Object(s.jsx)("option",{value:"Comida",children:"Comida"}),Object(s.jsx)("option",{value:"Limpieza",children:"Limpieza"}),Object(s.jsx)("option",{value:"Servicios",children:"Servicios"}),Object(s.jsx)("option",{value:"Impuestos",children:"Impuestos"}),Object(s.jsx)("option",{value:"Personal",children:"Personal"}),Object(s.jsx)("option",{value:"Mercader\xeda",children:"Mercader\xeda"}),Object(s.jsx)("option",{value:"Reparaciones",children:"Reparaciones"}),Object(s.jsx)("option",{value:"Proveedores",children:"Proveedores"}),Object(s.jsx)("option",{value:"Todos",children:"Todos"})]}),Object(s.jsx)("label",{htmlFor:"category",children:"Category"})]})]}),Object(s.jsxs)("table",{className:"responsive-table",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Registrado por"}),Object(s.jsx)("th",{children:"Concepto"}),Object(s.jsx)("th",{children:"Monto"}),Object(s.jsx)("th",{children:"Fecha"}),Object(s.jsx)("th",{children:"Tipo"}),Object(s.jsx)("th",{children:"Categoria"}),Object(s.jsx)("th",{})]})}),Object(s.jsx)("tbody",{children:this.state.Datosfiltrados.map((function(t,n){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:t.userName}),Object(s.jsx)("td",{children:t.concept}),Object(s.jsx)("td",{children:t.amount}),Object(s.jsx)("td",{children:t.date}),Object(s.jsx)("td",{children:t.type}),Object(s.jsx)("td",{children:t.category}),Object(s.jsxs)("td",{children:[Object(s.jsx)("button",{className:"btn-floating red ",onClick:function(){return e.delete(t._id)},children:Object(s.jsx)("i",{className:"material-icons",children:"delete"})}),Object(s.jsx)(N,{operation:t._id,clickHandler:e.getOperations})]})]},n)}))})]}),Object(s.jsx)(f,{clickHandler:this.getOperations})]})}}]),n}(c.a.Component),C=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).sendLogin=function(){fetch("http://localhost:8080/api/user/login",{method:"POST",body:JSON.stringify(e.state),headers:{"Content-Type":"application/json"}}).then((function(e){return e.text()})).then((function(t){sessionStorage.setItem("UserName",t),alert("Bienvenido "+t),e.props.history.push("/")})).catch((function(e){return console.error("Error:",e)}))},e.onChange=function(t){var n=e.state;n[t.target.name]=t.target.value,e.setState(n)},e.state={datos:[]},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"margin-top",children:Object(s.jsxs)("div",{className:"row container",children:[Object(s.jsxs)("form",{className:"col s12",children:[Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"email",id:"email",type:"email",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"email",children:"Email"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"password",id:"password",type:"password",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"password",children:"Password"})]})})]}),Object(s.jsx)("button",{className:"btn",onClick:this.sendLogin.bind(this),children:"Send"})]})})}}]),n}(c.a.Component),S=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).sendSignin=function(){fetch("http://localhost:8080/api/user/signin",{method:"POST",body:JSON.stringify(e.state),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.error("Error:",e)})).then((function(t){alert("registrado"),e.props.history.push("/login")}))},e.onChange=function(t){var n=e.state;n[t.target.name]=t.target.value,e.setState(n)},e.state={},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"margin-top",children:Object(s.jsxs)("div",{className:"row container",children:[Object(s.jsxs)("form",{className:"col s12",children:[Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"name",id:"name",type:"text",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"name",children:"Name"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"email",id:"email",type:"email",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"email",children:"Email"})]})}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("div",{className:"input-field col s12",children:[Object(s.jsx)("input",{name:"password",id:"password",type:"password",className:"validate",onChange:this.onChange.bind(this)}),Object(s.jsx)("label",{htmlFor:"password",children:"Password"})]})})]}),Object(s.jsx)("button",{className:"btn",onClick:this.sendSignin.bind(this),children:"Send"})]})})}}]),n}(c.a.Component);var F=function(){return Object(s.jsxs)(r.a,{children:[Object(s.jsx)("nav",{className:"light-blue accent-4",children:Object(s.jsxs)("div",{className:"nav-wrapper",children:[Object(s.jsxs)("ul",{id:"nav-mobile",className:"left",children:[Object(s.jsx)("li",{children:Object(s.jsx)(r.b,{to:"/",children:"Home"})}),Object(s.jsx)("li",{children:Object(s.jsx)(r.b,{to:"/list",children:"Listado de operaciones"})})]}),Object(s.jsxs)("ul",{id:"nav-mobile",className:"right",children:[Object(s.jsx)("li",{children:Object(s.jsx)(r.b,{to:"/signin",children:"Registrarse"})}),Object(s.jsx)("li",{children:Object(s.jsx)(r.b,{to:"/login",children:"Loguearse"})})]})]})}),Object(s.jsxs)(l.c,{children:[Object(s.jsx)(l.a,{path:"/list",component:y}),Object(s.jsx)(l.a,{path:"/login",component:C}),Object(s.jsx)(l.a,{path:"/signin",component:S}),Object(s.jsx)(l.a,{exact:!0,path:"/",component:O})]})]})};o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(F,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.b303ceb9.chunk.js.map